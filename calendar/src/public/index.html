<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui" name="viewport" />
<title>元元的专属日历</title>
<script type="text/javascript" src="zepto.min.js?a=8"></script>
<link rel="stylesheet" href="style.min.css" type="text/css" />
</head>
<body>
<body class="qn_skin_qunar">
    <div class="qn_main">
        <div class="qn_pages">
            <div class="qn_page" id="calendarPage">
                <div class="qn_header">
                    <div class="title"><div class="love"></div>元元的专属日历<div class="love"></div></div>
                </div>
                <div class="qn_calendar">
                </div>
            </div>
            <div class="qn_page" id="typePage">
                <div class="qn_header">
                    <div class="back"><a href="#calendarPage">后退</a></div>
                    <div class="title"></div>
                </div>
                <div class="qn_index_list">
                    <div class="content">
                        <dl class="qn_worktype"></dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="mask">
        <div id="loading" class="play">
            <div class="spinner outer">
                <div class="loading_icon"></div>
            </div>
            <div class="title">加载中，请稍等哒~</div>
        </div>
    </div>
    <script type="text/template" id="cTpl">
        <table>
            <thead><tr><td colspan="7"><h5><%= year %>年<span class="qn_blue"><%= month %>月</span></h5></td></tr></thead>
            <tbody>
                <tr class="weeks">
                    <th>周一</th>
                    <th>周二</th>
                    <th>周三</th>
                    <th>周四</th>
                    <th>周五</th>
                    <th class="weekend">周六</th>
                    <th class="weekend">周日</th>
                </tr>
                <% _.each(weeks, function(days){ %>
                    <tr class="days">
                        <% _.each(days, function(day){ %>
                            <td class="<%= day.content.className %>" data-day="<%= day.date%>"><%= day.content.html %></td>
                        <% })%>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </script>
    <script type="text/template" id="calendarTpl">
     <table>
        <thead><tr><td colspan="7"><h5><%= display.y %>年<span class="qn_blue"><%= display.m %>月</span></h5></td></tr></thead>
        <tbody <% if(tags) { %>class="withTag" <% } %>>
            <tr class="weeks">
                <th>周一</th>
                <th>周二</th>
                <th>周三</th>
                <th>周四</th>
                <th>周五</th>
                <th class="weekend">周六</th>
                <th class="weekend">周日</th>
            </tr>
            <% if(tags) { %>
            <% _.each(weeks, function(days){ %>
                <tr class="days">
                    <% for(var i = 0; i < 7; i++){ %>
                        <td class="<% if(choosen.d == days[i] && choosen.m == display.m && choosen.y == display.y){ %>active<% } %> 
                        <% if (i > 4){ %>weekend<% } %>
                        <% if (holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]){ %>holiday<% } %>
                        <% if (tiaoxiu[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]){ %>weekday<% } %>
                        <% if (!days[i]){ %>null"<% } %>
                        <% if (days[i] < 0) { %>disable"
                        <% } else{ %>" data-day="<%= $.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-') %>" <% } %>>
                        <p>
                        <% if(holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]) { %>
                        <%= holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')] %>
                        <% } else { %>
                        <%= days[i] ? ((today.d == days[i] && today.m == display.m) ? "今天" : Math.abs(days[i])) : "&nbsp;" %></p>
                        <% } %>
                        <%= tags[$.fixTo8Date(display.y, display.m, Math.abs(days[i]))] || '<p>&nbsp;</p>' %>
                        </td>
                    <% } %>
                </tr>
            <% })} else if(holiday) { %>
                <% _.each(weeks, function(days){ %>
                <tr class="days">
                    <% for(var i = 0; i < 7; i++){ %>
                        <td class="<% if(choosen.d == days[i] && choosen.m == display.m && choosen.y == display.y){ %>active<% } %> 
                        <% if (i > 4){ %>weekend<% } %>
                        <% if (holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]){ %>holiday<% } %>
                        <% if (tiaoxiu[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]){ %>weekday<% } %>
                        <% if (!days[i]){ %>null"<% } %>
                        <% if (days[i] < 0) { %>disable"
                        <% } else{ %>" data-day="<%= $.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-') %>" <% } %>>
                        <% if(holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')]) { %>
                        <%= holiday[$.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-')] %>
                        <% } else { %>
                        <%= days[i] ? ((today.d == days[i] && today.m == display.m) ? "今天" : Math.abs(days[i])) : "&nbsp;" %>
                        <% } %>
                        </td>
                    <% } %>
                </tr>
            <% })} else { %>
                <% _.each(weeks, function(days){ %>
                <tr class="days">
                    <% for(var i = 0; i < 7; i++){ %>
                        <td class="<% if(choosen.d == days[i] && choosen.m == display.m && choosen.y == display.y){ %>active<% } %> 
                        <% if (i > 4){ %>weekend<% } %>
                        <% if (!days[i]){ %>null"<% } %>
                        <% if (days[i] < 0) { %>disable"
                        <% } else{ %>" data-day="<%= $.fixTo8Date(display.y, display.m, Math.abs(days[i]), '-') %>" <% } %>>
                        <%= days[i] ? ((today.d == days[i] && today.m == display.m) ? "今天" : Math.abs(days[i])) : "&nbsp;" %>
                        </td>
                    <% } %>
                </tr>
            <% })} %>
        </tbody>
    </table>
    </script>
    <script type="text/template" id="typeTpl">
        <dd data-value="<%= value %>"><%= humanize %></dd>
    </script>
    <script type="text/javascript">
    $(function(){
        $.App();
    });
    // 
    </script>
</body>
</html>